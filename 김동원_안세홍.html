<html>
    <head>
        <title>carProject</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
        <script src="https://www.youtube.com/iframe_api"></script>
        <script>
            var player;
            function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                    height: '360',
                    width: '640',
                    // todo : 아래 유튜브Id만 바꿔주면 됩니다.
                    videoId: '72nMc4jEmbE',
                });
            }
            // 자동차 리스트 생성
            const carsList = [
                {carName: "더 뉴 펠리세이드1", carNum: "12가 3456", price: 1, carImage:"http://localhost:8080/image?name=car.png"},
                {carName: "더 뉴 펠리세이드2", carNum: "12가 3456", price: 2, carImage:"http://localhost:8080/image?name=car.png"},
                {carName: "더 뉴 펠리세이드3", carNum: "12가 3456", price: 3, carImage:"http://localhost:8080/image?name=car.png"}
            ];

            // 자동차 리스트를 HTML로 변환하여 보여주는 함수
            function displayCarsList(carsList) {
                // 리스트를 담을 HTML 요소를 가져옴
                const listElement = document.getElementById('carList');

                // 리스트를 순회하면서 각 항목을 HTML 요소로 변환하여 추가
                carsList.forEach(car => {
                    const listItem = document.createElement('span');
                    listItem.innerHTML = `
                        <a href="http://localhost:8080/carReservation?carId=${car.carName}" class="list-group-item list-group-item-action">
                          <div class="row no-gutters">
                            <div class="col-md-4">
                              <img style="max-width: 100%; height: auto" src="${car.carImage}">
                            </div>
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">${car.carName}</h5>
                                <p class="card-text">차량 번호 : ${car.carNum}<br>가격 : ${car.price}(시간당)</p>
                              </div>
                            </div>
                          </div>
                        </a>`;
                    listElement.appendChild(listItem);
                });
            }
            // 페이지 로드 시 자동차 리스트를 보여줌
            window.onload = function() {
                displayCarsList(carsList);
            };
        </script>
    </head>
    <body>
        <div class="d-flex justify-content-between p-5">
            <div>
                <a href="http://localhost:8080/carReservation?carId=firstcar"><img src="http://localhost:8080/image?name=carLogo.png" style="height: 80px;"></a>
            </div>
            <div class="card" style="width: 18rem;">
                <div class="card-body">
                    <!--            <h6 class="card-subtitle mb-2 text-muted">잔고 : 연결안됨</h6>-->
                    <div class="card-text">
                        <div id="address">계정주소 : 연결안됨</div>
                        <div id="remainMoney">잔고 : 연결안됨</div>
                    </div>
                </div>
            </div>
            <button id="loginBtn" type="button" class="btn btn-primary btn-lg">메타마스크 연결</button>
        </div>
        <div style="text-align: center"><div id="player"></div></div>
        <div class="p-5">
            <div class="d-flex justify-content-end p-3">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="자동차를 주소를 등록해주세요!" aria-label="Recipient's username" aria-describedby="carRegistrationBtn" id="carAddress">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="carRegistrationBtn">등록하기</button>
                    </div>
                </div>
            </div>
            <div class="list-group" id="carList"></div>
        </div>

    </body>
    <script>
        const carRegistrationBtn = document.querySelector("#carRegistrationBtn")
        carRegistrationBtn.addEventListener('click',() => {
            const carAddress = document.querySelector("#carAddress")
            console.log(carAddress.value)
            // 리셋하려면 이거 쓰세요. carAddress.value = ""
        })
    </script>
</html>